<app-main-layout>
  <div class="space-y-6">
    
    <!-- Header -->
    <div>
      <h1 class="text-2xl font-semibold text-[#00113f] dark:text-white">
        {{ t('dynamic_lists.title') }}
      </h1>
      <p class="mt-2 text-sm text-gray-700 dark:text-gray-300">
        {{ t('dynamic_lists.description') }}
      </p>
    </div>

    <!-- SELECT DE LISTAS -->
    <div class="bg-white dark:bg-gray-800 shadow-sm rounded-lg p-4 border border-gray-200 dark:border-gray-700">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
        {{ t('dynamic_lists.select_list') }}
      </label>

      <select 
        class="block w-full px-3 py-2 border rounded-md shadow-sm text-sm
               text-[#00113f] focus:outline-none focus:ring-[#3e66ea] focus:border-[#3e66ea]
               border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
        (change)="onListChange($event)"
      >
        <option value="">{{ t('dynamic_lists.choose') }}</option>
        <option *ngFor="let list of lists" [value]="list.list_id">
          {{ list.list_label }}
        </option>
      </select>
    </div>

    <!-- TABLA DE VALORES -->
    <div *ngIf="listSelected" 
         class="bg-white dark:bg-gray-800 shadow-sm rounded-lg p-4 border border-gray-200 dark:border-gray-700">

      <div class="flex justify-between mb-4">
        <h2 class="text-lg font-semibold text-gray-800 dark:text-white">
          {{ listSelected.list_label }}
        </h2>

        <button 
          (click)="openCreateDialog()" 
          class="flex items-center px-4 py-2 rounded-md bg-[#00113f] text-white text-sm hover:bg-[#3e66ea]">
          {{ t('dynamic_lists.add_value') }}
        </button>
      </div>

      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-300 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-700">
            <tr>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">
                {{ listSelected.code_label || 'C√≥digo' }}
              </th>
              <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">
                {{ listSelected.description_label || 'Descripci√≥n' }}
              </th>
              <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">
                {{ t('actions') }}
              </th>
            </tr>
          </thead>
          
          <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
            <tr *ngFor="let v of listSelected.values">
              <td class="px-4 py-2 text-sm text-gray-800 dark:text-white">{{ v.code || '-' }}</td>
              <td class="px-4 py-2 text-sm text-gray-800 dark:text-white">{{ v.description }}</td>

              <td class="px-4 py-2 text-center">
                <button (click)="openEditDialog(v)" class="text-blue-600 hover:text-blue-800 mr-3">
                  ‚úèÔ∏è
                </button>
                <button class="text-red-600 hover:text-red-800">
                  üóëÔ∏è
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>

    <!-- MODAL FORM -->
    <app-dynamic-list-form 
      *ngIf="isFormOpen"
      [list]="listSelected"
      [value]="selectedValue"
      (success)="onSuccess()"
      (cancel)="closeDialog()"
    ></app-dynamic-list-form>

  </div>
</app-main-layout>